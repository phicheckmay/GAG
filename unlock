--====================================================
-- ‚úÖ 1) ƒê·ª¢I GAME LOAD
--====================================================
repeat task.wait() until game:IsLoaded()

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LP = Players.LocalPlayer
local Backpack = LP:WaitForChild("Backpack")

--====================================================
-- ‚úÖ 2) UNLOCK TO√ÄN B·ªò TRANG B·ªä/PET B·ªä G·∫ÆN TIM ‚ù§Ô∏è
--====================================================
local function unlockAllFavorites()
    local ge = ReplicatedStorage:FindFirstChild("GameEvents", true)
    if not ge then
        warn("‚ùå Kh√¥ng t√¨m th·∫•y GameEvents!")
        return
    end

    local favEvent = ge:FindFirstChild("Favorite_Item", true)
    if not favEvent then
        warn("‚ùå Kh√¥ng t√¨m th·∫•y RemoteEvent Favorite_Item!")
        return
    end

    local count = 0
    for _, tool in ipairs(Backpack:GetChildren()) do
        if tool:IsA("Tool") and tool:GetAttribute("d") then -- Attribute "d" = ƒëang ƒë∆∞·ª£c Favorite
            favEvent:FireServer(tool)
            count += 1
            task.wait(0.05)
        end
    end

    print("‚úÖ [Unlock] ƒê√£ b·ªè lock " .. count .. " m√≥n ƒë·ªì trong Backpack!")
end

-- üöÄ G·ªåI CH·∫†Y UNLOCK TR∆Ø·ªöC
unlockAllFavorites()

-- Ch·ªù 0.5s ƒë·ªÉ server c·∫≠p nh·∫≠t xong lock status
task.wait(0.5)

--====================================================
-- ‚úÖ 3) B·∫¨T AUTOSELL + B√ÅN TO√ÄN B·ªò BRAINROT
--====================================================
local RS = game:GetService("ReplicatedStorage")
local AutoSellRemote = RS.Remotes and RS.Remotes:FindFirstChild("AutoSell")
local SellAllRemote = RS.Remotes:WaitForChild("ItemSell")

if not AutoSellRemote then
    warn("‚ùå Kh√¥ng t√¨m th·∫•y Remote AutoSell!")
    return
end

-- Config ƒë·ªô hi·∫øm n√†o s·∫Ω b·ªã b√°n (x√°m)
local DesiredConfig = {
    Normal=true, Rare=true, Epic=true, Legendary=true, Mythic=true,
    Secret=true, Godly=true, Limited=true, Diamond=true, Neon=true,
    CandyCorn=true, Rainbow=true, Magma=true, Headless=true, Ruby=true,
}

getgenv().SellStatus = getgenv().SellStatus or {}

local function setAutoSellIfNeeded(rarity, wantGray)
    if getgenv().SellStatus[rarity] == wantGray then return end
    AutoSellRemote:FireServer(rarity, wantGray)
    getgenv().SellStatus[rarity] = wantGray
    print("‚öô AutoSell:", rarity, "‚Üí", wantGray and "B√ÅN (x√°m)" or "GI·ªÆ (m√†u)")
end

-- Thi h√†nh config
for rarity, wantGray in pairs(DesiredConfig) do
    setAutoSellIfNeeded(rarity, wantGray)
    task.wait(0.15)
end

print("üéØ ƒê√É SET AUTOSSELL XONG! Chu·∫©n b·ªã b√°n to√†n b·ªô...")

-- B√°n to√†n b·ªô
task.wait(1.5)
SellAllRemote:FireServer(nil, nil, true)
print("üí∞ ‚úÖ B√ÅN TO√ÄN B·ªò BRAINROTS TH√ÄNH C√îNG!")
